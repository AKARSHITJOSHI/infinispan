<?xml version="1.0" encoding="UTF-8"?>
<!--
   This package will build a ZIP containing the following:

   + modules
      + core
         - infinispan-core.jar
         + lib (contains dependencies)
      + tree
         - infinispan-tree.jar
         + lib

      .. etc ...
      
   + bin (any scripts, etc)
   + etc (sample configs, resources, etc from src/main/resources)
   + doc (release notes, etc from src/main/release)
-->
<assembly xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:maven:assembly:1.1.0-SNAPSHOT">
  <id>dep</id>
  <formats>
    <format>zip</format>
  </formats>
<!-- TODO fix this, this is still based on the old JBoss Cache src tree -->
  <includeBaseDirectory>true</includeBaseDirectory>
  <moduleSets>
    <moduleSet>
      <includes>
        <include>org.infinispan:infinispan-core</include>
      </includes>
      <sources>
        <fileSets>
<!-- resources -->
          <fileSet>
            <directory>src/main/resources</directory>
            <outputDirectory>etc</outputDirectory>
            <excludes>
              <exclude>**/*.sh</exclude>
            </excludes>
          </fileSet>
<!-- Executable resources -->
          <fileSet>
            <directory>src/main/resources</directory>
            <outputDirectory>etc</outputDirectory>
            <includes>
              <include>**/*.sh</include>
            </includes>
            <fileMode>0777</fileMode>
          </fileSet>
<!-- Log4j XML -->
          <fileSet>
            <directory>src/test/resources</directory>
            <outputDirectory>etc</outputDirectory>
            <includes>
              <include>log4j.xml</include>
            </includes>
          </fileSet>
<!-- EULAs and license files -->
          <fileSet>
            <directory>src/main/release</directory>
            <outputDirectory/>
            <includes>
              <include>**/*.txt</include>
            </includes>
          </fileSet>
        </fileSets>
      </sources>
      <binaries>
  <dependencySets> 
    <dependencySet> 
      <outputDirectory>lib</outputDirectory> 
      <outputFileNameMapping> 
        ${groupId}-${artifactId}.${extension} 
      </outputFileNameMapping> 
    </dependencySet> 
  </dependencySets> 
      </binaries>
    </moduleSet>
  </moduleSets>
</assembly>

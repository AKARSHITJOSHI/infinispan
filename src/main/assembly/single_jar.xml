<?xml version="1.0" encoding="UTF-8"?>

<!--
   This package will build a ZIP containing a single jar, containing classes from ALL modules.

   - infinispan-all.jar
   + lib (all dependencies)

   + bin (any scripts, etc)
   + etc (sample configs, resources, etc from src/main/resources)
   + doc (release notes, etc from src/main/release)
-->
      
<assembly xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:maven:assembly:1.1.0-SNAPSHOT">
   <id>all</id>

   <formats>
      <format>zip</format>
   </formats>

   <!-- TODO fix this, this is still based on the old JBoss Cache src tree -->
   <includeBaseDirectory>true</includeBaseDirectory>

   <fileSets>

      <!-- code -->
      <fileSet>
         <directory>target</directory>
         <outputDirectory/>
         <includes>
            <include>*.jar</include>
         </includes>
         <excludes>
            <exclude>*test*.jar</exclude>
         </excludes>
      </fileSet>

      <!-- resources -->
      <fileSet>
         <directory>src/main/resources</directory>
         <outputDirectory>etc</outputDirectory>
         <excludes>
            <exclude>**/*.sh</exclude>
         </excludes>
      </fileSet>

      <!-- Executable resources -->
      <fileSet>
         <directory>src/main/resources</directory>
         <outputDirectory>etc</outputDirectory>
         <includes>
            <include>**/*.sh</include>
         </includes>
         <fileMode>0777</fileMode>
      </fileSet>

      <!-- Log4j XML -->
      <fileSet>
         <directory>src/test/resources</directory>
         <outputDirectory>etc</outputDirectory>
         <includes>
            <include>log4j.xml</include>
         </includes>
      </fileSet>

      <!-- EULAs and license files -->
      <fileSet>
         <directory>src/main/release</directory>
         <outputDirectory/>
         <includes>
            <include>**/*.txt</include>
         </includes>
      </fileSet>

      <!-- docs -->
      <fileSet>
         <directory>target/site/apidocs</directory>
         <outputDirectory>doc/apidocs</outputDirectory>
      </fileSet>

      <fileSet>
         <directory>target/docbook</directory>
         <outputDirectory>doc/</outputDirectory>
      </fileSet>
   </fileSets>

   <!-- Make sure we filter out the junk that jboss-common-core pulls in -->
   <dependencySets>
      <dependencySet>
         <outputDirectory>lib</outputDirectory>
         <outputFileNameMapping>${scope}/${artifactId}.${extension}</outputFileNameMapping>
         <unpack>false</unpack>
         <scope>test</scope>
      </dependencySet>
   </dependencySets>
</assembly>
